(()=>{"use strict";class t{constructor(){this.states=[]}get state(){return this.states[this.states.length-1]||null}render(t){let s=0;const e=this.states.length;for(;s<e;)t.save(),this.states[s].render(t),t.restore(),s++}update(t){this.state&&this.state.update(t)}push(t){return this.states.push(t),console.log(`[State - Enter] ${this.state} -> ${t}`),t.enter(),this}pop(){const t=this.states.pop();return console.log(`[State - Exit] ${t}`),t.exit(),this}clear(){return this.states=[],this}reset(){return this.states=[],this}}const s=new class{constructor({selector:s,height:e,width:i}){this.stopped=!1,this.time=0,this.stack=new t,this.canvas=document.querySelector(s),this.ctx=this.canvas.getContext("2d"),this.canvas.height=e,this.canvas.width=i}start(){const t=s=>{const e=s-this.time;this.time=s,this.stopped||(0!==s&&this.initCanvas(),this.stack.update({time:s,delta:e}),this.stack.render(this.ctx),requestAnimationFrame((s=>t(s))))};t(this.time)}stop(){this.stopped=!0}initCanvas(){this.canvas.height=this.canvas.height,this.canvas.width=this.canvas.width}}({selector:"canvas#game",height:360,width:640});class e{constructor(t){this.text=t,this.timeout=100,this.time=0}render(t){t.textAlign="center",t.font="30px Arial",t.fillText(this.text,t.canvas.width/2,t.canvas.height/2)}update({delta:t}){this.time+=t,this.time>=this.timeout&&s.stack.pop()}exit(){}enter(){}toString(){return"Dialogue"}}class i{render(t){}update(t){}exit(){}enter(){setTimeout((()=>s.stack.push(new e("Hello World!")).push(new e("Click To Continue"))),1e3)}toString(){return"Start"}}try{s.stack.push(new i),s.start()}catch(t){console.error(t)}})();